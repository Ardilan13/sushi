{"version":3,"sources":["app.js"],"names":["$","on","e","preventDefault","ajax","url","data","serialize","type","dataType","success","text","location","prop","alert","val","error","xhr","status","errorThrown","length","this","attr","console","show","css","log","change","resultado","html","producto","parseJSON","precio","cantidad","valor","parseFloat","document","ready","temp","clone","click","after","table","DataTable","orderCellsTop","fixedHeader","appendTo","each","i","column","search","value","draw"],"mappings":"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","file":"bundle.js","sourcesContent":["//Ajax revisa el login y genera credenciales\r\n$(\"#btn_login\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $.ajax({\r\n    url: \"ajax/login.php\",\r\n    data: $(\"#ingreso\").serialize(),\r\n    type: \"POST\",\r\n    dataType: \"text\",\r\n    success: function (text) {\r\n      if (text == 1) {\r\n        $(location).prop(\"href\", \"productos.php\");\r\n      } else {\r\n        alert(\"ContraseÃ±a incorrecta.\");\r\n        $(\"#clave\").val(\"\");\r\n      }\r\n    },\r\n    error: function (xhr, status, errorThrown) {\r\n      alert(\"Error\");\r\n    },\r\n  });\r\n});\r\n\r\n//boton acceder al modulo de crear nuevo producto\r\n$(\"#new_pro\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_producto.php\");\r\n});\r\n\r\n//Ajax crea un nuevo producto\r\n$(\"#add_producto\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#nombre\").val().length > 0 &&\r\n    $(\"#proveedor\").val().length > 0 &&\r\n    $(\"#tipo\").val().length > 0 &&\r\n    $(\"#merma\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0 &&\r\n    $(\"#precio\").val().length > 0 &&\r\n    $(\"#unidad\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/add_producto.php\",\r\n      data: $(\"#new_producto\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Producto Creado!\");\r\n          $(location).prop(\"href\", \"productos.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          alert(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n//accede al menu actualizar producto y le pasa el id por metodo GET\r\n$(\".edit_pro\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n  $(location).prop(\"href\", \"new_producto.php?id=\" + $(this).attr(\"id\"));\r\n});\r\n\r\n//Ajax actualiza el producto seleccionado\r\n$(\"#btn_update_pro\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#nombre\").val().length > 0 &&\r\n    $(\"#proveedor\").val().length > 0 &&\r\n    $(\"#tipo\").val().length > 0 &&\r\n    $(\"#merma\").val().length > 0 &&\r\n    $(\"#unidad\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/update_producto.php\",\r\n      data: $(\"#new_producto\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Producto Actualizado!\");\r\n          $(location).prop(\"href\", \"productos.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          console(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\"#btn_producir\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"produccion.php?id=\" + $(\"#id\").val());\r\n});\r\n\r\n$(\"input:radio[name=producido]\").on(\"click\", function (e) {\r\n  if ($(\"input:radio[name=producido]:checked\").val() == \"nuevo\") {\r\n    $(\".nuevo\").show();\r\n    $(\".existente\").css(\"display\", \"none\");\r\n  } else {\r\n    $(\".existente\").show();\r\n    $(\".nuevo\").css(\"display\", \"none\");\r\n  }\r\n});\r\n\r\n$(\"#add_producto_pro\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#nombre\").val().length > 0 &&\r\n    $(\"#tipo\").val().length > 0 &&\r\n    $(\"#unidad\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0\r\n  ) {\r\n    if ($(\"#cantidad_pro_1\").val() <= $(\"#test\").val()) {\r\n      $.ajax({\r\n        url: \"ajax/add_produccion.php\",\r\n        data: $(\"#new_producto_pro\").serialize(),\r\n        type: \"POST\",\r\n        dataType: \"text\",\r\n        success: function (text) {\r\n          if (text == 1) {\r\n            alert(\"Producto Creado y Cantidad Restada!\");\r\n            $(location).prop(\"href\", \"productos.php\");\r\n          } else {\r\n            alert(\"Error, intente nuevamente.\");\r\n            alert(text);\r\n          }\r\n        },\r\n        error: function (xhr, status, errorThrown) {\r\n          alert(\"Error\");\r\n        },\r\n      });\r\n    } else {\r\n      alert(\"La cantidad a usar no pued ser mayor a la cantidad existente.\");\r\n    }\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\"#update_produccion\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#producto\").val().length > 0 &&\r\n    $(\"#cantidad_pro_2\").val().length > 0\r\n  ) {\r\n    if ($(\"#cantidad_pro_2\").val() <= $(\"#test1\").val()) {\r\n      $.ajax({\r\n        url: \"ajax/update_produccion.php\",\r\n        data: $(\"#update_producto_pro\").serialize(),\r\n        type: \"POST\",\r\n        dataType: \"text\",\r\n        success: function (text) {\r\n          if (text == 1) {\r\n            alert(\"Producto Actualizado y Cantidad Restada!\");\r\n            $(location).prop(\"href\", \"productos.php\");\r\n          } else {\r\n            alert(\"Error, intente nuevamente.\");\r\n            alert(text);\r\n          }\r\n        },\r\n        error: function (xhr, status, errorThrown) {\r\n          alert(\"Error\");\r\n        },\r\n      });\r\n    } else {\r\n      alert(\"La cantidad a usar no pued ser mayor a la cantidad existente.\");\r\n    }\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\".new_pre\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_preparacion.php\");\r\n});\r\n\r\n$(\".des_exc\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"ajax/descargar_excel.php\");\r\n});\r\n\r\n$(\".edit_pre\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n  $(location).prop(\"href\", \"new_preparacion.php?id=\" + $(this).attr(\"id\"));\r\n});\r\n\r\n$(\"#add_preparacion\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if ($(\"#nombre\").val().length > 0 && $(\"#tipo\").val().length > 0) {\r\n    $.ajax({\r\n      url: \"ajax/add_preparacion.php\",\r\n      data: $(\"#new_preparacion\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Preparacion Creada!\");\r\n          $(location).prop(\"href\", \"preparaciones.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          alert(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n//Ajax actualiza la preparacion seleccionado\r\n$(\"#btn_update_pre\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#nombre\").val().length > 0 &&\r\n    $(\"#proveedor\").val().length > 0 &&\r\n    $(\"#tipo\").val().length > 0 &&\r\n    $(\"#merma\").val().length > 0 &&\r\n    $(\"#unidad\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/update_producto.php\",\r\n      data: $(\"#new_producto\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Producto Actualizado!\");\r\n          $(location).prop(\"href\", \"productos.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          console(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\"#new_ing\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_ingrediente.php?id=\" + $(\"#id\").val());\r\n});\r\n\r\n$(\"#add_ing\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#producto\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0 &&\r\n    $(\"#valor\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/add_ingrediente.php\",\r\n      data: $(\"#new_ingrediente\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Ingrediente agregado y valor actualizado!\");\r\n          $(location).prop(\"href\", \"preparaciones.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          alert(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\".edit_pre_pro\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\r\n    \"href\",\r\n    \"new_ingrediente.php?ingrediente=\" + $(this).attr(\"id\")\r\n  );\r\n});\r\n\r\n$(\"#update_ing\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if ($(\"#cantidad\").val().length > 0 && $(\"#valor\").val().length > 0) {\r\n    $.ajax({\r\n      url: \"ajax/update_ingrediente.php\",\r\n      data: $(\"#new_ingrediente\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Ingrediente y valor actualizados!\");\r\n          $(location).prop(\"href\", \"preparaciones.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          alert(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n//boton acceder al modulo de generar una compra\r\n$(\"#new_com\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_compra.php\");\r\n});\r\n\r\n//Ajax que genera una nueva compra\r\n$(\"#add_compra\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#producto\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0 &&\r\n    $(\"#precio\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/add_compra.php\",\r\n      data: $(\"#new_compra\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Compra generada y producto actualizado!\");\r\n          $(location).prop(\"href\", \"compras.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          console.log(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n$(\".edit_com\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_compra.php?id=\" + $(this).attr(\"id\"));\r\n});\r\n\r\n$(\"#btn_update_com\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  if (\r\n    $(\"#id\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0 &&\r\n    $(\"#precio\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/update_compra.php\",\r\n      data: $(\"#new_compra\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          alert(\"Compra Actualizada!\");\r\n          $(location).prop(\"href\", \"compras.php\");\r\n        } else {\r\n          alert(\"Error, intente nuevamente.\");\r\n          console(text);\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n//Actualizar la cantidad para tener en cuenta las unidades, modulo agreagr compras\r\n$(\"#producto\").change(function () {\r\n  //poner que tipo de unidad es el producto\r\n  var unidad = $(\"#producto option:selected\").attr(\"unidad\");\r\n  switch (unidad) {\r\n    case \"1\":\r\n      resultado = \" en Kgs:\";\r\n      break;\r\n    case \"2\":\r\n      resultado = \" en Lts:\";\r\n      break;\r\n    case \"3\":\r\n      resultado = \" en Und:\";\r\n      break;\r\n    default:\r\n      resultado = \":\";\r\n  }\r\n  $(\"#unidad_producto\").html(\"Cantidad\" + resultado);\r\n\r\n  //poner el precio y cantidad anterior de ese producto\r\n  var producto = $(\"#producto option:selected\").val();\r\n  $.ajax({\r\n    url: \"ajax/get_data_producto.php\",\r\n    data: \"id=\" + producto,\r\n    type: \"GET\",\r\n    dataType: \"text\",\r\n    success: function (text) {\r\n      if (text != 0) {\r\n        //traen los datos en un json y se muestran en los placeholder\r\n        var data = $.parseJSON(text);\r\n        $(\"#precio\").attr(\"placeholder\", data.precio);\r\n        $(\"#valor\").attr(\"placeholder\", data.precio);\r\n        $(\"#cantidad\").attr(\"placeholder\", data.cantidad);\r\n        $(\"#cantidad\").attr(\"precio\", data.valor);\r\n        $(\"#cantidad\").val(\"\");\r\n        $(\"#valor\").val(\"\");\r\n      }\r\n    },\r\n  });\r\n});\r\n\r\n//Actualizar el valor de manera automatica al cambiar la cantidad\r\n$(\"#cantidad\").change(function () {\r\n  var cantidad = parseFloat($(this).val());\r\n  var precio = parseFloat($(this).attr(\"precio\"));\r\n  var valor = cantidad * precio;\r\n  $(\"#valor\").val(valor);\r\n});\r\n\r\n//acceder al menudo de generar movimientos, entradas o salidas\r\n$(\".new_mov\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n\r\n  $(location).prop(\"href\", \"new_movimiento.php\");\r\n});\r\n\r\n//Genera un movimiento de entrada o de salida y lo guarda\r\n$(\"#add_movimiento\").on(\"click\", function (e) {\r\n  e.preventDefault();\r\n  if (\r\n    $(\"#producto\").val().length > 0 &&\r\n    $(\"#cantidad\").val().length > 0 &&\r\n    $(\"#tipo\").val().length > 0 &&\r\n    $(\"#motivo\").val().length > 0\r\n  ) {\r\n    $.ajax({\r\n      url: \"ajax/verificar_cantidad.php\",\r\n      data: $(\"#new_movimiento\").serialize(),\r\n      type: \"POST\",\r\n      dataType: \"text\",\r\n      success: function (text) {\r\n        if (text == 1) {\r\n          $.ajax({\r\n            url: \"ajax/add_movimiento.php\",\r\n            data: $(\"#new_movimiento\").serialize(),\r\n            type: \"POST\",\r\n            dataType: \"text\",\r\n            success: function (text) {\r\n              if (text == 1) {\r\n                alert(\"Movimiento generado y producto actualizado!\");\r\n                $(location).prop(\"href\", \"movimientos.php\");\r\n              } else {\r\n                alert(\"Error, intente nuevamente.\");\r\n                console(text);\r\n              }\r\n            },\r\n            error: function (xhr, status, errorThrown) {\r\n              alert(\"Error\");\r\n            },\r\n          });\r\n        } else {\r\n          alert(\r\n            \"La cantidad de la salida \" +\r\n              $(\"#cantidad\").val() +\r\n              \" no puede ser mayor a \" +\r\n              text\r\n          );\r\n        }\r\n      },\r\n      error: function (xhr, status, errorThrown) {\r\n        alert(\"Error\");\r\n      },\r\n    });\r\n  } else {\r\n    alert(\"Llena todos los campos.\");\r\n  }\r\n});\r\n\r\n// Filtro y busqueda tablas\r\n$(document).ready(function () {\r\n  let temp = $(\"#clonar\").clone();\r\n  $(\"#clonar\").click(function () {\r\n    $(\"#clonar\").after(temp);\r\n  });\r\n\r\n  var table = $(\"#tabla\").DataTable({\r\n    orderCellsTop: true,\r\n    fixedHeader: true,\r\n  });\r\n\r\n  //Crea el buscador de cada atributo\r\n  $(\"#tabla thead tr\").clone(true).appendTo(\"#tabla thead\");\r\n\r\n  $(\"#tabla thead tr:eq(1) th\").each(function (i) {\r\n    $(this).html(\r\n      '<input type=\"text\" style=\"width:80%; padding: 5px;border-radius: 5px;border:.5px solid grey;\" placeholder=\"Buscar...\"/>'\r\n    );\r\n\r\n    $(\"input\", this).on(\"keyup change\", function () {\r\n      if (table.column(i).search() !== this.value) {\r\n        table.column(i).search(this.value).draw();\r\n      }\r\n    });\r\n  });\r\n\r\n  $.ajax({\r\n    url: \"ajax/list_productos.php\",\r\n    data: null,\r\n    type: \"POST\",\r\n    dataType: \"text\",\r\n    success: function (text) {\r\n      $(\"#producto\").html(text);\r\n    },\r\n  });\r\n});\r\n"]}